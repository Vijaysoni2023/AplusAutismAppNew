@model aplusautism.Bal.DTO.LoginDTO

@{
    ViewData["Title"] = "SignIn";
    Layout = null;
}
<html lang="en">
<head>
    <link rel="stylesheet" href="~/custome_containt/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/custome_containt/css/style.css" />
    <link rel="stylesheet" href="~/custome_containt/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" />
     @*favicon icon*@
    <link rel="shortcut icon" type="image/png" href="~/custome_containt/images/favicon.png" alt="favicon" />
    <style>
        body.stop-scrolling .sweet-alert.showSweetAlert.visible  {
        margin-top: inherit !important;
        }
        body.stop-scrolling .sweet-alert.showSweetAlert.visible {
        top: 25%;
        }

        .auth-wrapper .row.auth-row {
            position: relative;
        }
       .alert-message {
            position: absolute;
            bottom: 0;
            padding: 8px 6px 7px;
            text-align: center;
            background: #d65a2f;
           /* background:#f5f5f5;*/
            left: 0;
            width: 100%;
            color: #fff;
        }
        .alert-message h6 {
            font-size: 0.92em;
            margin: 0;
            font-weight: 600;
            color: inherit;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>

    <script>

        /* Add "https://api.ipify.org?format=json" statement
                   this will communicate with the ipify servers in
                   order to retrieve the IP address $.getJSON will
                   load JSON-encoded data from the server using a
                   GET HTTP request */

        $.getJSON("https://api.ipify.org?format=json", function (data) {
            $("#IpAddress").val(data.ip);
            // Setting text of element P with id gfg
         //   alert(data.ip);
        })
    </script>

    <!-- Google tag (gtag.js) -->
   @* <script async src="https://www.googletagmanager.com/gtag/js?id=G-VPFK77NWM8"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-VPFK77NWM8');
    </script>
*@
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-G53LPFK5FY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-G53LPFK5FY');
    </script>

    @*<script type="text/javascript">

        var _gaq = gaq || [];
        _gaq.push(['_setAccount', 'G-G1M30PC13T']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>*@

</head>
<body>
    <div id="app">
        <div class="container-fluid auth-wrapper">
            <div class="row auth-row">
                <div class="col-lg-6 col-xl-6 col-sm-12">
                    <div class="row">
                        <div class="auth-header col-12">
                            <div class="inner-rw row align-items-center justify-content-center ">
                                <a class="logo btn" href="#">

                                    <img src="~/custome_containt/images/logo.png" alt="Autism Logo">
                                </a>
                                <div class="head-link">
                                    <a asp-area="" asp-controller="Auth" asp-action="SignIn" class="btn">Sign In</a>
                                    <span>|</span>
                                    <a asp-area="" asp-controller="Auth" asp-action="Register" class="btn">Sign Up</a>
                                </div>
                            </div>
                        </div>
                        <div class="auth-inner col-12">
                            <div class="auth-form">
                                <div class="head">
                                    <h2>Sign In</h2>
                                    <h3>Sign in to continue in our website</h3>
                                </div>
                                <p class="bg-danger text-white">@ViewBag.Error</p>
                                <form id="signin" asp-area="Admin" asp-action="SignIn" asp-controller="CustSubscription" asp class="col-12">
                                    <input type="hidden" name="DeviceId" id="DeviceId" value="" />
                                    <input type="hidden" name="IpAddress" id="IpAddress" value="" />
                                    
                                    <div style="display:none;">
                                        <button id="id-stop-button" disabled>
                                            Stop and clear MediaStream
                                        </button>
                                        <h3 id="id-title">Device labels</h3>
                                        <div id="id-device-labels"></div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group">
                                            <label for="Email">Email Address </label>
                                            <input asp-for="@Model.Email" type="text" 
                                            class="form-control" name="Email" id="Email" onkeyup="RemoveSpace()"
                                            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$">
                                            <span class="icon">
                                                <i class='bx bx-envelope'></i>
                                            </span>
                                        </div>
                                        <div class="form-group">
                                            <label for="Password">Password</label>
                                            <input asp-for="@Model.Password" type="Password" class="form-control" name="Password">
                                            <span class="icon">
                                                <i id="eye" class="fa fa-eye-slash"></i>
                                            </span>
                                        </div>
                                        <div class="form-group remember-txt" style="margin-bottom:12px;">
                                            <div class="row justify-content-between pl-3 pr-4" id="remember-filed">
                                                <div class="submit-btn">
                                                    <button type="submit" id="submit" class="btn btn-primary">Sign In</button>
                                                </div>
                                                <a class="col-auto btn btn-link mt-2" href="Auth/ForgetPassword">Forgot Password</a>
                                                @* <a class="col-auto btn btn-link" href="forgot-password.html">Forgot Password</a>*@
                                            </div>
                                        </div>

                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="alert-message">
                        <h6>For the best experience, please use Firefox or Chrome browsers. For Android, make sure you're using a version higher than 10.</h6>
                    </div>
                </div>
                <div class="col-md-6 col-xl-6 col-sm-12 d-xl-block d-lg-block d-none">
                    <div class="row auth-form-pic">
                        <img class="img-fluid" src="~/custome_containt/images/login-bg.png" alt="Signin">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="~/custome_containt/js/jquery-3.3.1.slim.min.js" asp-append-version="true"></script>
    <script src="~/custome_containt/js/popper.min.js" asp-append-version="true"></script>
    <script src="~/custome_containt/js/bootstrap.min.js" asp-append-version="true"></script>


    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


    @*JQuery validation CDN files*@


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>

    <script type="text/javascript">

        //$(document).ready(function () {
        //    var value = "";
        //   // alert('From Monday it is not done');
        //    const displayDeviceLabels = () => {
        //        navigator.mediaDevices.enumerateDevices().then((devices) => {
        //            const domDeviceLabelsElement = document.getElementById("id-device-labels");
        //            domDeviceLabelsElement.innerHTML = "";
        //            devices.forEach((device) => {
        //                debugger;
        //                value += device.groupId + ',';
        //               // SaveDeviceTrackings(Value);
        //               // alert('Inside loop' + value);
        //            });
        //            $("#DeviceId").val(value);
        //            var check = $("#DeviceId").val();
        //          //  alert(check);
        //        });
        //    };
        //    let stream = null;

        //    navigator.mediaDevices
        //        .getUserMedia({ audio: true, video: true })
        //        .then((s) => {
        //            console.log("Ok, got stream");
        //            stream = s;
        //            document.getElementById("id-stop-button").disabled = false;

        //            // Permissions granted and MediaStream set,
        //            // display device labels succeeds
        //            displayDeviceLabels();
        //        })
        //        .catch((error) => {
        //            console.log("Error :", error);
        //        });
        //});


        function SaveDeviceTrackings(Value) {

            $.ajax({
                type: "POST",
                url: "/Admin/CustSubscription/SaveDeviceTracking?" + $.param({ DeviceId: Value }),
                data: Value,
                success: function (result) {
                }
            });
        }

        $(document).ready(function () {

            var viewdata = '@ViewBag.registereduser';
            debugger;
            // alert(viewdata)

            if (viewdata == "True") {
                swal("Thanks", "Thanks! User Have Registered", "success");
                     //var options = {
                     //               title: ' ',
                     //               text: '<img  src="../custome_containt/images/thanks_user_register.jpg" width="100%" height="100%">',
                     //               width: '600px',
                     //               height:'380px',
                     //               html: true
                     //           };
                     //            swal(options);
                //swal("Thanks!", "User Registered")
            }




            $('#signin').validate({
                rules: {
                    Email: "required",
                    Password: "required",
                    Email: {
                        required: true,
                        email: true
                        //regex:/^([a-zA-Z0-9_.+-])+\@@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/

                    },
                    Password: {
                        required: true
                    }
                },

                messages: {
                    Email: {
                        required: "Please enter email",
                        email: "Your email address must be in the format of name@domain.com"
                    },
                    Password: {
                        required: "Please enter password"
                    }

                },


                highlight: function (element) {
                    $(element).closest('.form-group').addClass('has-error');
                },
                unhighlight: function (element) {
                    $(element).closest('.form-group').removeClass('has-error');
                },
                errorElement: 'span',
                errorClass: 'help-block',
                errorPlacement: function (error, element) {
                    if (element.parent('.input-group').length) {
                        error.insertAfter(element.parent());
                    } else {
                        error.insertAfter(element);
                    }
                },

                //submitHandler: function(form) {
                //alert("Form submitted successfully")
                //form.submit();
                //}
            });
        });
    </script>
 

    <script type="text/javascript">

        //password input type change

        $(function () {
            $('#eye').click(function () {

                if ($(this).hasClass('fa-eye-slash')) {

                    $(this).removeClass('fa-eye-slash');

                    $(this).addClass('fa-eye');

                    $('#Password').attr('type', 'text');

                } else {

                    $(this).removeClass('fa-eye');

                    $(this).addClass('fa-eye-slash');

                    $('#Password').attr('type', 'password');
                }
            });
        });
    </script>

    <script type="text/javascript">
        function RemoveSpace() {
            debugger;
            var emailValue = document.getElementById("Email").value;
           var replaceSpace = emailValue.replace(/\s/g, "");
            document.getElementById("Email").value = replaceSpace;

//            var el = document.getElementsByName("10010input")[0];
//var val = el.value.replace(/\s/g, "") /[^0-9]/, ';
//alert(val);
        }
    </script>
    <script src="dist/js/popper.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
</body>
</html>